<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- custom styles -->
    <link rel="stylesheet" href="../styles.css" />
    <!-- web experience toolkit -->
    <link
      href="../GCWeb/assets/favicon-mobile.png"
      rel="icon"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="../GCWeb/css/theme.min.css" />
    <noscript
      ><link rel="stylesheet" href="../GCWeb/wet-boew/css/noscript.min.css"
    /></noscript>
    <!-- leaflet -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""
    />
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div id="ie-warning"></div>
        </div>
      </div>
    </div>

    <div class="profile-title">
      <h2>Pipeline Profiles - NGTL</h2>
      <h3>New Safety & Environment Sections</h3>
    </div>

    <div class="tab">
      <button
        class="tablinks"
        onclick="openTab(event, 'condition-compliance')"
        id="defaultClick"
      >
        Conditions Compliance
      </button>
      <!-- the below button needs to remain "Pipeline Incidents" -->
      <button class="tablinks" onclick="openTab(event, 'pipeline-incidents')">
        Pipeline Incidents
      </button>
      <button class="tablinks" onclick="openTab(event, 'contaminated-sites')">
        Contaminated Sites/Remediation
      </button>
      <button class="tablinks" onclick="openTab(event, 'o&m-activities')">
        Operations and Maintenace Activities
      </button>
      <button
        class="tablinks"
        onclick="openTab(event, 'unauthorized-activities')"
      >
        Unauthorized Activities
      </button>
    </div>

    <!-- Start Condition Compliance -->

    <div id="condition-compliance" class="profile-section tabcontent">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <h2>Conditions Compliance</h2>
            <p>
              Every pipeline company in Canada must meet federal, provincial or
              territorial, and local requirements. This includes Acts,
              Regulations, rules, bylaws, and zoning restrictions. Pipelines are
              also bound by technical, safety, and environmental standards along
              with company rules, protocols and management systems. In addition
              to these requirements, the CER may add conditions to regulatory
              instruments that each company must meet. Condition compliance is
              monitored by the CER and
              <a href="/en/safety-environment/compliance-enforcement/index.html"
                >enforcement</a
              >
              action is taken when required. Conditions are often relevant to a
              specific region. The map below displays the number of in progress
              and closed conditions mapped to economic regions as defined by
              <a
                href="https://www12.statcan.gc.ca/census-recensement/2011/geo/bound-limit/bound-limit-eng.cfm"
                >Statistics Canada
              </a>
            </p>
            <p>
              Conditions can typically be either in-progress or closed. The CER
              follows up on in-progress conditions.
            </p>
            <div class="row">
              <div class="col-md-6">
                <section class="panel panel-default" style="min-height: 350px">
                  <header class="panel-heading">
                    <h5 class="panel-title">In-Progress</h5>
                  </header>
                  <div class="panel-body">
                    <p>
                      This status refers to conditions that continue to be
                      monitored by the CER. This happens when:
                    </p>
                    <ul>
                      <li>
                        condition filings have not yet been received by the CER;
                        or,
                      </li>
                      <li>
                        filings have been received but are under review or do
                        not yet meet requirements; or,
                      </li>
                      <li>
                        a project is not completed and it has conditions, which
                        have not been met; or,
                      </li>
                      <li>
                        a project has a post-construction condition, but a
                        requirement has not yet been completed; or,
                      </li>
                      <li>
                        some conditions may be active indefinitely or refer to
                        the continued operation of a pipeline.
                      </li>
                    </ul>
                  </div>
                </section>
              </div>
              <div class="col-md-6">
                <section class="panel panel-default" style="min-height: 350px">
                  <header class="panel-heading">
                    <h5 class="panel-title">Closed</h5>
                  </header>
                  <div class="panel-body">
                    <p>This status refers to:</p>
                    <ul>
                      <li>
                        condition requirements that have been satisfied, and no
                        further submissions from the company are required; or
                      </li>
                      <li>
                        conditions whose filings or actions apply to a specific
                        phase that have been fulfilled as the phase is completed
                        (i.e. a specific filing during construction phase).
                        Note: comments on the required actions can still be
                        received.
                      </li>
                    </ul>
                  </div>
                </section>
              </div>
            </div>

            <!-- conditions map -->
            <div class="chart-large" id="conditions-dashboard">
              <div class="row">
                <div class="col-md-12 col-lg-12">
                  <h3 id="conditions-map-title"></h3>
                </div>
              </div>
              <div class="mrgn-tp-sm"></div>

              <div class="row">
                <div class="col-md-12 col-lg-12">
                  <div
                    class="btn-group btn-group-justified"
                    id="conditions-nav-group"
                  >
                    <div class="btn-group btn-conditions">
                      <button
                        type="button"
                        class="btn btn-default"
                        value="In Progress"
                        id="in-progress-btn"
                      >
                        <div class="conditions-summary-title">
                          Total In-Progress Conditions:
                        </div>
                        <div
                          class="conditions-summary-value"
                          id="in-progress-summary"
                        ></div>
                      </button>
                    </div>
                    <div class="btn-group btn-conditions">
                      <button
                        type="button"
                        class="btn btn-default"
                        value="Closed"
                        id="closed-btn"
                      >
                        <div class="conditions-summary-title">
                          Total Closed Conditions:
                        </div>
                        <div
                          class="conditions-summary-value"
                          id="closed-summary"
                        ></div>
                      </button>
                    </div>
                    <div class="btn-group btn-conditions">
                      <button
                        type="button"
                        class="btn btn-default disabled"
                        value="not-shown"
                      >
                        <div class="conditions-summary-title">
                          No Geographic Location (not shown):
                        </div>
                        <div
                          class="conditions-summary-value"
                          id="no-location-summary"
                        ></div>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12 col-lg-12">
                  <div class="container-chart-map" id="container-map"></div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12 col-lg-12">
                  <div
                    class="alert alert-info"
                    id="conditions-definitions"
                    style="display: none"
                  ></div>
                </div>
              </div>
            </div>
            <div class="mrgn-tp-lg"></div>
            <div class="row">
              <div class="col-md-12">
                <details>
                  <summary>Source and Description</summary>
                  <p><strong>Source:</strong> CER Regdocs</p>
                  <p><strong>Description:</strong> Coming Soon!</p>
                </details>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <p>
                  Open data can be freely used and shared by anyone for any
                  purpose. The
                  <a
                    href="http://www.cer-rec.gc.ca/open/conditions/conditions.csv"
                    target="_blank"
                    rel="external"
                    >data for these graphs are available</a
                  >.
                </p>
                <p>
                  Have you checked out the CER's
                  <a
                    href="https://apps2.cer-rec.gc.ca/conditions/"
                    target="_blank"
                    rel="external"
                    >interactive conditions data visualization</a
                  >? This tool offers a deep dive into the CER's conditions
                  compliance data and process, exploring conditions across all
                  CER regulated companies by keyword, project, and location.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="pipeline-incidents" class="profile-section tabcontent">
      <div class="container">
        <div class="chart-large" id="incidents-dashboard">
          <div class="row">
            <div class="col-md-12">
              <h2 id="incidents-map-title">
                Pipeline Incidents With A Product Release
              </h2>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <!-- add map buttons here -->
              <div class="cerlabel">Select incident data:</div>
              <div
                class="btn-group btn-group-justified"
                id="incident-data-type"
              >
                <div class="btn-group btn-incident-data-type">
                  <button
                    type="button"
                    class="btn btn-default active"
                    value="frequency"
                  >
                    Incident Count
                  </button>
                </div>
                <div class="btn-group btn-incident-data-type">
                  <button type="button" class="btn btn-default" value="volume">
                    Incident Volume
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="mrgn-tp-sm"></div>
          <div class="row">
            <div class="col-md-8">
              <div id="incident-map"></div>
            </div>
            <div class="col-md-4">
              <div class="incident-filter-bar" id="substance-bar"></div>
              <div class="mrgn-tp-sm"></div>
              <div class="incident-filter-bar" id="status-bar"></div>
              <div class="mrgn-tp-sm"></div>
              <div class="incident-filter-bar" id="year-bar"></div>
              <div class="mrgn-tp-sm"></div>
              <div class="incident-filter-bar" id="province-bar"></div>
            </div>
          </div>
          <div class="mrgn-tp-md"></div>
          <section class="panel panel-info">
            <header class="panel-heading">
              <h5 class="panel-title">Are there any incidents near me?</h5>
            </header>
            <div class="panel-body incidents-near-me">
              <div class="row" style="margin: 0px">
                <div class="col-md-12 cerlabel" id="find-incidents-title">
                  Select Range (100km):
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 center-stuff">
                  <input
                    name="html5shim-1"
                    id="incident-range-slide"
                    type="range"
                    min="0"
                    max="200"
                    step="1"
                    value="100"
                  />
                </div>
                <div class="col-md-3 center-stuff">
                  <button
                    type="button"
                    value="100"
                    id="find-incidents-btn"
                    class="btn btn-default"
                  >
                    Find Incidents within 100km
                  </button>
                </div>
                <div class="col-md-3 center-stuff">
                  <button
                    type="button"
                    id="reset-incidents-btn"
                    class="btn btn-default"
                    disabled="disabled"
                  >
                    Reset Map
                  </button>
                </div>
              </div>
              <div class="row" style="margin-top: 25px; margin-bottom: -15px">
                <div
                  class="col-md-12"
                  id="nearby-flag"
                  style="margin-bottom: -15px"
                ></div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>

    <div id="contaminated-sites" class="profile-section tabcontent">
      Coming Soon!
    </div>

    <div id="o&m-activities" class="profile-section tabcontent">
      Coming Soon!
    </div>

    <div id="unauthorized-activities" class="profile-section tabcontent">
      Coming Soon!
    </div>

    <div class="mrgn-tp-xl"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.js"></script>
    <script>
      function openTab(evt, sectionName) {
        var i, tabcontent, tablinks;
        $(".profile-section").hide();
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        //$("." + sectionName).show();
        document.getElementById(sectionName).style.display = "block";
        evt.currentTarget.className += " active";
      }
      document.addEventListener("DOMContentLoaded", function (event) {
        document.getElementById("defaultClick").click();
      });
    </script>
    <script type="text/javascript">
      function themeClick(e) {
        let definitions = {
          Administrative: "Conditions that help track organizational tasks.",

          "Damage Prevention":
            "Conditions that hold companies accountable for the safe conduct in and around pipelines and facilities.",

          "Emergency Management":
            "Conditions that ensure companies have a robust program that anticipates and prevents incidents, and manages and mitigates situations during an emergency.",

          Enforcement:
            "Conditions that reinforce prescribed regulatory requirements to be met.",

          "Environmental Protection":
            "Conditions that mandate projects to be planned, built, operated or abandoned in a manner that protects the environment.",

          Financial:
            "Conditions that require certain details or all aspects of a company’s financial obligations be fulfilled.",

          "Integrity Management":
            "Conditions that ensure projects are designed, built, operated and maintained in a safe and effective manner. For instance, the use of appropriate materials, the detection of corrosion, etc.",

          "Management System":
            "Company specific conditions that ensure the use of an effective and efficient approach to manage and reduce risk. Note: A management system is not project specific.",

          "Safety Management":
            "Conditions that eliminate or reduce risk to the public, workers, the environment and assets.",

          Security:
            "Conditions that ensure companies have adequate personnel and systems to deter, respond and manage security threats.",

          "Socio-Economic":
            "Conditions that address the concerns of potentially affected landowners, residents, communities, indigenous groups, etc.",

          "Standard Condition":
            "A condition that is typically imposed on all approved projects.",
          "Sunset Clause":
            "Conditions that ensure projects begin within a specific period of time.",
        };
        var definitionDiv = document.getElementById("conditions-definitions");
        if (definitionDiv.style.display === "none") {
          definitionDiv.style.display = "block";
        }
        var themes = e.innerText.split(",");
        var definitionsHTML = "<h4>Theme Definitions:</h4>";
        for (var i = 0; i < themes.length; i++) {
          var t = themes[i].trim();
          definitionsHTML += "<b>" + t + "</b>";
          definitionsHTML += "<p>" + definitions[t] + "</p>";
        }
        definitionDiv.innerHTML = definitionsHTML;
        var divPosition = $("#conditions-definitions").offset();
        $("html, body").animate({ scrollTop: divPosition.top }, "slow");
      }
    </script>
    <!-- <script src="../GCWeb/wet-boew/js/wet-boew.min.js"></script> -->
    <!-- highcharts -->
    <script src="https://code.highcharts.com/8.2.2/highcharts.js"></script>
    <script src="https://code.highcharts.com/maps/8.2.2/modules/map.js"></script>
    <script src="https://code.highcharts.com/gantt/8.2.2/modules/gantt.js"></script>
    <script src="https://code.highcharts.com/8.2.2/modules/annotations.js"></script>
    <script src="https://code.highcharts.com/8.2.2/modules/no-data-to-display.js"></script>
    <script src="https://code.highcharts.com/gantt/8.2.2/modules/current-date-indicator.js"></script>
    <!-- leaflet -->
    <script
      src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
      integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
      crossorigin=""
    ></script>
    <!-- webpack bundle -->
    <script src="../dist/bundle_ngtl_eng.js" type="text/javascript"></script>
  </body>
</html>
