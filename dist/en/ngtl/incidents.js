(self.webpackChunkpipeline_profiles=self.webpackChunkpipeline_profiles||[]).push([[720],{2800:(e,t,a)=>{"use strict";a.r(t),a.d(t,{modTest:()=>V});var n=a(7757),i=a.n(n),r=(a(5666),a(8926)),o=a.n(r);const s=JSON.parse('{"$":{"relativePct":{"count":23},"companyName":"NOVA Gas Transmission Ltd.","seriousEvents":{"Adverse Environmental Effects":7,"Fatality":1,"Serious Injury (CER or TSB)":12},"release":89,"nonRelease":241,"per1000km":{"incidentsPerKm":14,"avgPerKm":42,"commodity":"gas"},"mostCommonWhat":"external interference","mostCommonWhy":"maintenance","mostCommonSubstance":"natural gas - sweet"},"U":[{"Incident Number":"INC2009-058","Province":"Alberta","Status":"Closed","Latitude":51.728528000000004,"Longitude":-111.6805,"Approximate Volume Released":17000,"Substance":"Natural Gas - Sweet","Year":2009,"What Happened":"External Interference","Why It Happened":"Maintenance"},{"Incident Number":"INC2009-066","Province":"Alberta","Status":"Closed","Latitude":58.208389000000004,"Longitude":-118.501722,"Approximate Volume Released":1450000,"Substance":"Natural Gas - Sweet","Year":2009,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance, Tools and Equipment"},{"Incident Number":"INC2009-075","Province":"Alberta","Status":"Closed","Latitude":55.12549,"Longitude":-117.83828000000001,"Approximate Volume Released":40,"Substance":"Natural Gas - Sweet","Year":2009,"What Happened":"Equipment Failure","Why It Happened":"Maintenance"},{"Incident Number":"INC2009-076","Province":"Alberta","Status":"Closed","Latitude":53.58571,"Longitude":-116.43392,"Approximate Volume Released":2.9,"Substance":"Natural Gas - Sweet","Year":2009,"What Happened":"Defect and Deterioration","Why It Happened":"Maintenance"},{"Incident Number":"INC2009-086","Province":"Alberta","Status":"Closed","Latitude":51.669109999999996,"Longitude":-111.89811,"Approximate Volume Released":0.5,"Substance":"Natural Gas - Sweet","Year":2009,"What Happened":"Equipment Failure","Why It Happened":"Maintenance"},{"Incident Number":"INC2009-087","Province":"Alberta","Status":"Closed","Latitude":59.05953,"Longitude":-119.89276000000001,"Approximate Volume Released":10,"Substance":"Natural Gas - Sweet","Year":2009,"What Happened":"Corrosion and Cracking","Why It Happened":"Tools and Equipment"},{"Incident Number":"INC2009-090","Province":"Alberta","Status":"Closed","Latitude":54.8308,"Longitude":-118.64572,"Approximate Volume Released":100,"Substance":"Fuel Gas","Year":2009,"What Happened":"Equipment Failure","Why It Happened":"Maintenance"},{"Incident Number":"INC2009-104","Province":"Alberta","Status":"Closed","Latitude":53.961169999999996,"Longitude":-116.46306000000001,"Approximate Volume Released":63000,"Substance":"Natural Gas - Sweet","Year":2009,"What Happened":"External Interference","Why It Happened":"Maintenance"},{"Incident Number":"INC2010-001","Province":"Alberta","Status":"Closed","Latitude":56.367553,"Longitude":-119.93171299999999,"Approximate Volume Released":125000,"Substance":"Natural Gas - Sweet","Year":2010,"What Happened":"Equipment Failure","Why It Happened":"Maintenance"},{"Incident Number":"INC2010-051","Province":"Alberta","Status":"Closed","Latitude":57.19361,"Longitude":-118.20533999999999,"Approximate Volume Released":1,"Substance":"Natural Gas - Sweet","Year":2010,"What Happened":"Equipment Failure","Why It Happened":"Maintenance"},{"Incident Number":"INC2010-055","Province":"Alberta","Status":"Closed","Latitude":54.093481000000004,"Longitude":-116.62138,"Approximate Volume Released":0.1,"Substance":"Natural Gas - Sweet","Year":2010,"What Happened":"Equipment Failure","Why It Happened":"Maintenance"},{"Incident Number":"INC2010-066","Province":"Alberta","Status":"Closed","Latitude":53.167269999999995,"Longitude":-112.15003,"Approximate Volume Released":0.5,"Substance":"Natural Gas - Sweet","Year":2010,"What Happened":"Corrosion and Cracking","Why It Happened":"Natural or Environmental Forces"},{"Incident Number":"INC2010-096","Province":"Alberta","Status":"Closed","Latitude":51.50897,"Longitude":-113.86985,"Approximate Volume Released":3,"Substance":"Natural Gas - Sweet","Year":2010,"What Happened":"Defect and Deterioration","Why It Happened":"Maintenance"},{"Incident Number":"INC2010-128","Province":"Alberta","Status":"Closed","Latitude":54.67993889,"Longitude":-118.9943333,"Approximate Volume Released":1,"Substance":"Natural Gas - Sweet","Year":2010,"What Happened":"Equipment Failure","Why It Happened":"Maintenance"},{"Incident Number":"INC2011-073","Province":"Alberta","Status":"Closed","Latitude":53.60098000000001,"Longitude":-116.46762,"Approximate Volume Released":10,"Substance":"Natural Gas - Sweet","Year":2011,"What Happened":"Natural Force Damage","Why It Happened":"Maintenance"},{"Incident Number":"INC2011-085","Province":"Alberta","Status":"Closed","Latitude":49.30721,"Longitude":-114.015,"Approximate Volume Released":2,"Substance":"Natural Gas - Sweet","Year":2011,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2011-171","Province":"Alberta","Status":"Closed","Latitude":54.14314,"Longitude":-115.36091,"Approximate Volume Released":50,"Substance":"Natural Gas - Sweet","Year":2011,"What Happened":"Equipment Failure","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2012-017","Province":"British Columbia","Status":"Closed","Latitude":59.20208,"Longitude":-121.62187,"Approximate Volume Released":0.001,"Substance":"Propane","Year":2012,"What Happened":"Incorrect Operation","Why It Happened":"Maintenance"},{"Incident Number":"INC2012-038","Province":"Alberta","Status":"Closed","Latitude":54.64742,"Longitude":-112.80015,"Approximate Volume Released":65,"Substance":"Natural Gas - Sweet","Year":2012,"What Happened":"Equipment Failure","Why It Happened":"Maintenance"},{"Incident Number":"INC2012-086","Province":"Alberta","Status":"Closed","Latitude":54.83015,"Longitude":-118.64728000000001,"Approximate Volume Released":5,"Substance":"Natural Gas - Sweet","Year":2012,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2013-146","Province":"Alberta","Status":"Closed","Latitude":56.514327,"Longitude":-113.679868,"Approximate Volume Released":16500000,"Substance":"Natural Gas - Sweet","Year":2013,"What Happened":"Defect and Deterioration","Why It Happened":"Engineering and Planning, Failure in communication"},{"Incident Number":"INC2013-162","Province":"Alberta","Status":"Closed","Latitude":54.50936,"Longitude":-112.64735,"Approximate Volume Released":4300000,"Substance":"Natural Gas - Sweet","Year":2013,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2014-008","Province":"Alberta","Status":"Closed","Latitude":51.911918,"Longitude":-113.66435800000001,"Approximate Volume Released":1,"Substance":"Natural Gas - Sweet","Year":2014,"What Happened":"External Interference, Incorrect Operation","Why It Happened":"Standards and Procedures"},{"Incident Number":"INC2014-033","Province":"Alberta","Status":"Closed","Latitude":52.492169999999994,"Longitude":-114.98816000000001,"Approximate Volume Released":30001,"Substance":"Natural Gas - Sweet","Year":2014,"What Happened":"Corrosion and Cracking, Incorrect Operation","Why It Happened":"Maintenance"},{"Incident Number":"INC2014-048","Province":"Alberta","Status":"Closed","Latitude":50.78931,"Longitude":-112.46998,"Approximate Volume Released":1110,"Substance":"Natural Gas - Sweet","Year":2014,"What Happened":"Corrosion and Cracking, Natural Force Damage","Why It Happened":"Engineering and Planning, Maintenance"},{"Incident Number":"INC2014-062","Province":"Alberta","Status":"Closed","Latitude":55.569186,"Longitude":-110.720302,"Approximate Volume Released":0.001,"Substance":"Natural Gas - Sweet","Year":2014,"What Happened":"Defect and Deterioration, External Interference, Incorrect Operation","Why It Happened":"Engineering and Planning, Failure in communication, Human Factors, Inadequate Procurement, Standards and Procedures"},{"Incident Number":"INC2014-065","Province":"Alberta","Status":"Closed","Latitude":52.173034,"Longitude":-113.83313999999999,"Approximate Volume Released":148,"Substance":"Natural Gas - Sweet","Year":2014,"What Happened":"Natural Force Damage","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2014-074","Province":"Alberta","Status":"Closed","Latitude":53.522635,"Longitude":-112.075565,"Approximate Volume Released":1114,"Substance":"Natural Gas - Sweet","Year":2014,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2014-081","Province":"Alberta","Status":"Closed","Latitude":52.928709999999995,"Longitude":-111.88763999999999,"Approximate Volume Released":322,"Substance":"Natural Gas - Sweet","Year":2014,"What Happened":"Corrosion and Cracking, Defect and Deterioration, Incorrect Operation","Why It Happened":"Maintenance"},{"Incident Number":"INC2014-084","Province":"Alberta","Status":"Closed","Latitude":55.24345,"Longitude":-119.69046999999999,"Approximate Volume Released":0.0001,"Substance":"Natural Gas - Sweet","Year":2014,"What Happened":"Natural Force Damage","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2014-096","Province":"Alberta","Status":"Closed","Latitude":51.40375331,"Longitude":-114.03396956,"Approximate Volume Released":2,"Substance":"Natural Gas - Sweet","Year":2014,"What Happened":"Equipment Failure, Natural Force Damage, Other Causes","Why It Happened":"Engineering and Planning, Maintenance"},{"Incident Number":"INC2014-137","Province":"Alberta","Status":"Closed","Latitude":52.46696,"Longitude":-114.2987,"Approximate Volume Released":0.001,"Substance":"Natural Gas - Sweet","Year":2014,"What Happened":"Defect and Deterioration","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2015-016","Province":"Alberta","Status":"Closed","Latitude":54.524331000000004,"Longitude":-112.66596100000001,"Approximate Volume Released":0.06,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance, Tools and Equipment"},{"Incident Number":"INC2015-021","Province":"Alberta","Status":"Closed","Latitude":55.0045,"Longitude":-119.47200000000001,"Approximate Volume Released":0.1,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Corrosion and Cracking, External Interference","Why It Happened":"Human Factors, Tools and Equipment"},{"Incident Number":"INC2015-046","Province":"Alberta","Status":"Closed","Latitude":54.69512814,"Longitude":-110.72729395,"Approximate Volume Released":41380,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Corrosion and Cracking, External Interference","Why It Happened":"Maintenance"},{"Incident Number":"INC2015-049","Province":"Alberta","Status":"Closed","Latitude":55.815180000000005,"Longitude":-119.36578999999999,"Approximate Volume Released":0.1,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Corrosion and Cracking, Defect and Deterioration","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2015-056","Province":"Alberta","Status":"Closed","Latitude":50.16626,"Longitude":-110.59318,"Approximate Volume Released":3400000,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Incorrect Operation, Natural Force Damage","Why It Happened":"Engineering and Planning, Natural or Environmental Forces"},{"Incident Number":"INC2015-095","Province":"Alberta","Status":"Closed","Latitude":56.337317000000006,"Longitude":-119.910103,"Approximate Volume Released":2366,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2015-096","Province":"Alberta","Status":"Closed","Latitude":51.32322,"Longitude":-113.37743,"Approximate Volume Released":0.001,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2015-104","Province":"Alberta","Status":"Closed","Latitude":53.914064,"Longitude":-111.70074199999999,"Approximate Volume Released":9510,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2015-107","Province":"Alberta","Status":"Closed","Latitude":53.195074,"Longitude":-111.90868,"Approximate Volume Released":9744,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2015-121","Province":"Alberta","Status":"Closed","Latitude":54.830121999999996,"Longitude":-118.645459,"Approximate Volume Released":1.22,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Equipment Failure, External Interference","Why It Happened":"Human Factors, Maintenance"},{"Incident Number":"INC2015-123","Province":"Alberta","Status":"Closed","Latitude":57.3426,"Longitude":-111.74337,"Approximate Volume Released":1,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Defect and Deterioration","Why It Happened":"Maintenance"},{"Incident Number":"INC2015-127","Province":"Alberta","Status":"Closed","Latitude":52.614059999999995,"Longitude":-110.96463999999999,"Approximate Volume Released":14075,"Substance":"Natural Gas - Sweet","Year":2015,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2016-010","Province":"Alberta","Status":"Closed","Latitude":57.42235949,"Longitude":-118.24922174,"Approximate Volume Released":42,"Substance":"Natural Gas - Sweet","Year":2016,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance, Tools and Equipment"},{"Incident Number":"INC2016-043","Province":"Alberta","Status":"Closed","Latitude":54.097120999999994,"Longitude":-112.56291399999999,"Approximate Volume Released":370,"Substance":"Natural Gas - Sweet","Year":2016,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2016-080","Province":"Alberta","Status":"Closed","Latitude":50.70313,"Longitude":-111.157945,"Approximate Volume Released":40,"Substance":"Natural Gas - Sweet","Year":2016,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2016-083","Province":"Alberta","Status":"Closed","Latitude":55.51043000000001,"Longitude":-113.46468,"Approximate Volume Released":52000,"Substance":"Natural Gas - Sweet","Year":2016,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2016-086","Province":"Alberta","Status":"Closed","Latitude":54.850669999999994,"Longitude":-112.82706,"Approximate Volume Released":1,"Substance":"Natural Gas - Sweet","Year":2016,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2016-103","Province":"Alberta","Status":"Closed","Latitude":50.696946000000004,"Longitude":-111.53471,"Approximate Volume Released":1.5,"Substance":"Lube Oil","Year":2016,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2016-120","Province":"Alberta","Status":"Closed","Latitude":51.599421,"Longitude":-114.244235,"Approximate Volume Released":342,"Substance":"Natural Gas - Sweet","Year":2016,"What Happened":"Equipment Failure","Why It Happened":"Maintenance"},{"Incident Number":"INC2016-149","Province":"Alberta","Status":"Closed","Latitude":53.20998,"Longitude":-111.84962,"Approximate Volume Released":9246,"Substance":"Natural Gas - Sweet","Year":2016,"What Happened":"Other Causes","Why It Happened":"Human Factors"},{"Incident Number":"INC2017-039","Province":"Alberta","Status":"Closed","Latitude":56.36,"Longitude":-119.92,"Approximate Volume Released":25000,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Incorrect Operation","Why It Happened":"Maintenance"},{"Incident Number":"INC2017-053","Province":"Alberta","Status":"Closed","Latitude":50.69834843,"Longitude":-111.53063326,"Approximate Volume Released":1.75,"Substance":"Lube Oil","Year":2017,"What Happened":"Corrosion and Cracking, Incorrect Operation","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2017-075","Province":"Alberta","Status":"Closed","Latitude":53.01993,"Longitude":-112.18718,"Approximate Volume Released":1,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Equipment Failure, Incorrect Operation, Natural Force Damage","Why It Happened":"Natural or Environmental Forces"},{"Incident Number":"INC2017-079","Province":"Alberta","Status":"Closed","Latitude":54.959880000000005,"Longitude":-119.1945,"Approximate Volume Released":7.5,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Natural Force Damage","Why It Happened":"Natural or Environmental Forces"},{"Incident Number":"INC2017-091","Province":"Alberta","Status":"Closed","Latitude":54.04370807,"Longitude":-117.42054229,"Approximate Volume Released":2,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Corrosion and Cracking","Why It Happened":"Tools and Equipment"},{"Incident Number":"INC2017-114","Province":"Alberta","Status":"Closed","Latitude":54.057238,"Longitude":-113.21904599999999,"Approximate Volume Released":17022,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning, Maintenance"},{"Incident Number":"INC2017-115","Province":"Alberta","Status":"Closed","Latitude":50.71329,"Longitude":-112.09326999999999,"Approximate Volume Released":9777,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Corrosion and Cracking, External Interference","Why It Happened":"Natural or Environmental Forces"},{"Incident Number":"INC2017-167","Province":"Alberta","Status":"Closed","Latitude":53.10047466,"Longitude":-115.36423859,"Approximate Volume Released":24,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Defect and Deterioration, Incorrect Operation","Why It Happened":"Inadequate Procurement, Inadequate Supervision, Standards and Procedures"},{"Incident Number":"INC2017-169","Province":"Alberta","Status":"Closed","Latitude":54.63,"Longitude":-118.95,"Approximate Volume Released":10,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2017-170","Province":"Alberta","Status":"Closed","Latitude":53.83523,"Longitude":-111.33383,"Approximate Volume Released":6474,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2017-186","Province":"Alberta","Status":"Closed","Latitude":54.67505,"Longitude":-111.98998999999999,"Approximate Volume Released":18337,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning, Maintenance"},{"Incident Number":"INC2017-189","Province":"British Columbia","Status":"Closed","Latitude":55.78756,"Longitude":-120.53231000000001,"Approximate Volume Released":2.05,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2017-194","Province":"Alberta","Status":"Closed","Latitude":54.04370807,"Longitude":-117.42054229,"Approximate Volume Released":7552,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Defect and Deterioration","Why It Happened":"Standards and Procedures"},{"Incident Number":"INC2017-195","Province":"Alberta","Status":"Closed","Latitude":54.17425,"Longitude":-116.67334,"Approximate Volume Released":5125,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2017-197","Province":"Alberta","Status":"Closed","Latitude":51.40840045,"Longitude":-113.6557044,"Approximate Volume Released":786,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Defect and Deterioration","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2017-201","Province":"Alberta","Status":"Closed","Latitude":54.04370807,"Longitude":-117.42054229,"Approximate Volume Released":252,"Substance":"Natural Gas - Sweet","Year":2017,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2018-003","Province":"Alberta","Status":"Closed","Latitude":57.19025,"Longitude":-118.19293899,"Approximate Volume Released":265457,"Substance":"Natural Gas - Sweet","Year":2018,"What Happened":"Equipment Failure","Why It Happened":"Tools and Equipment"},{"Incident Number":"INC2018-012","Province":"Alberta","Status":"Closed","Latitude":53.10047466,"Longitude":-115.36423859,"Approximate Volume Released":17260,"Substance":"Natural Gas - Sweet","Year":2018,"What Happened":"Corrosion and Cracking, Incorrect Operation","Why It Happened":"Maintenance"},{"Incident Number":"INC2018-028","Province":"Alberta","Status":"Closed","Latitude":54.532966,"Longitude":-112.094773,"Approximate Volume Released":50622.5,"Substance":"Natural Gas - Sweet","Year":2018,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2018-060","Province":"Alberta","Status":"Closed","Latitude":55.25153009,"Longitude":-114.52175252,"Approximate Volume Released":13944,"Substance":"Natural Gas - Sweet","Year":2018,"What Happened":"Equipment Failure, External Interference","Why It Happened":"Engineering and Planning"},{"Incident Number":"INC2018-145","Province":"Alberta","Status":"Closed","Latitude":56.37079958,"Longitude":-119.92266240000001,"Approximate Volume Released":10,"Substance":"Natural Gas - Sweet","Year":2018,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning, Maintenance"},{"Incident Number":"INC2018-117","Province":"Alberta","Status":"Closed","Latitude":54.414958,"Longitude":-111.158422,"Approximate Volume Released":50767,"Substance":"Natural Gas - Sweet","Year":2018,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning, Tools and Equipment"},{"Incident Number":"INC2018-139","Province":"Alberta","Status":"Closed","Latitude":50.304959999999994,"Longitude":-112.09675,"Approximate Volume Released":607.13,"Substance":"Natural Gas - Sweet","Year":2018,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning, Failure in communication"},{"Incident Number":"INC2018-165","Province":"Alberta","Status":"Closed","Latitude":56.48610421,"Longitude":-114.11750799,"Approximate Volume Released":8213.59,"Substance":"Natural Gas - Sweet","Year":2018,"What Happened":"Corrosion and Cracking, Incorrect Operation","Why It Happened":"Standards and Procedures, Tools and Equipment"},{"Incident Number":"INC2019-008","Province":"Alberta","Status":"Closed","Latitude":56.37079958,"Longitude":-119.92266240000001,"Approximate Volume Released":2866,"Substance":"Natural Gas - Sweet","Year":2019,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2019-013","Province":"Alberta","Status":"Closed","Latitude":54.09446953,"Longitude":-113.23131808,"Approximate Volume Released":0.13,"Substance":"Natural Gas - Sweet","Year":2019,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning, Maintenance"},{"Incident Number":"INC2019-041","Province":"Alberta","Status":"Closed","Latitude":53.381576,"Longitude":-115.61593799999999,"Approximate Volume Released":192183.49,"Substance":"Natural Gas - Sweet","Year":2019,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning, Maintenance"},{"Incident Number":"INC2019-113","Province":"Alberta","Status":"Closed","Latitude":51.44418383,"Longitude":-114.52710752,"Approximate Volume Released":3.18,"Substance":"Lube Oil","Year":2019,"What Happened":"Equipment Failure, Other Causes","Why It Happened":"Inadequate Procurement"},{"Incident Number":"INC2019-120","Province":"Alberta","Status":"Submitted","Latitude":53.198331,"Longitude":-116.19417299999999,"Approximate Volume Released":31775.96,"Substance":"Natural Gas - Sweet","Year":2019,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning, Maintenance"},{"Incident Number":"INC2020-016","Province":"Alberta","Status":"Submitted","Latitude":53.198482999999996,"Longitude":-116.19276599999999,"Approximate Volume Released":0.1,"Substance":"Natural Gas - Sweet","Year":2020,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning, Maintenance"},{"Incident Number":"INC2020-017","Province":"Alberta","Status":"Closed","Latitude":52.98812718,"Longitude":-112.19138271,"Approximate Volume Released":22702,"Substance":"Natural Gas - Sweet","Year":2020,"What Happened":"Corrosion and Cracking","Why It Happened":"Engineering and Planning, Maintenance"},{"Incident Number":"INC2020-036","Province":"Alberta","Status":"Initially Submitted","Latitude":53.77239,"Longitude":-116.91948000000001,"Approximate Volume Released":9100,"Substance":"Natural Gas - Sweet","Year":2020,"What Happened":"To be determined","Why It Happened":"To be determined"},{"Incident Number":"INC2020-039","Province":"Alberta","Status":"Closed","Latitude":54.48310727,"Longitude":-118.09993252,"Approximate Volume Released":129636.35,"Substance":"Natural Gas - Sweet","Year":2020,"What Happened":"Corrosion and Cracking","Why It Happened":"Maintenance"},{"Incident Number":"INC2020-043","Province":"Alberta","Status":"Submitted","Latitude":56.7054,"Longitude":-111.40299999999999,"Approximate Volume Released":11457864.96,"Substance":"Natural Gas - Sweet","Year":2020,"What Happened":"Corrosion and Cracking, Natural Force Damage","Why It Happened":"Engineering and Planning, Maintenance, Standards and Procedures"},{"Incident Number":"INC2020-050","Province":"Alberta","Status":"Submitted","Latitude":50.38248,"Longitude":-114.22641399999999,"Approximate Volume Released":86,"Substance":"Natural Gas - Sweet","Year":2020,"What Happened":"Corrosion and Cracking","Why It Happened":"Tools and Equipment"},{"Incident Number":"INC2020-110","Province":"Alberta","Status":"Initially Submitted","Latitude":56.803237,"Longitude":-111.447943,"Approximate Volume Released":10,"Substance":"Natural Gas - Sweet","Year":2020,"What Happened":"To be determined","Why It Happened":"To be determined"},{"Incident Number":"INC2020-127","Province":"Alberta","Status":"Initially Submitted","Latitude":56.48610421,"Longitude":-114.11750799,"Approximate Volume Released":11,"Substance":"Lube Oil","Year":2020,"What Happened":"To be determined","Why It Happened":"To be determined"}]}');a(2222),a(1249);var d=function(e){var t=document.getElementById("system-incidents-paragraph"),a="<p>",n=function(e){return'<i class="bg-primary" style="font-style: normal"><strong>&nbsp'.concat(e,"&nbsp</strong></i>")},i=function(e,t){return"have"==t?1==e?"has":"have":"fatality"==t?1==e?"fatality":"fatalities":void 0};a+="".concat(e.companyName," has reported a total of ").concat(n(e.release+e.nonRelease)," incidents since 2008. Of those incidents, ").concat(n(e.release)," have resulted in some volume of product being released, with ").concat(n(e.mostCommonSubstance)," being the most commonly released substance.   The dashboard below provides some more information about these unintended product release incidents."),a+="</p>",a+="<p>Relative to other CER regulated pipelines, ".concat(e.companyName," has accounted for approximately ").concat(n(e.relativePct.count+"%")," of reported incidents. Per 1000 km there have been approximately ").concat(n(e.per1000km.incidentsPerKm)," incidents (all incident types), compared to an average of ").concat(n(e.per1000km.avgPerKm)," for large CER regulated ").concat(e.per1000km.commodity," pipelines."),a+="</p>",a+="<p>Part of the CER's incident review classifies incidents based on the \n  circumstances that directly led to the incident (what happened), and the underlying reasons for the incident (why it happened). \n  On the pipeline system, the most common <i>what happened</i> is ".concat(n(e.mostCommonWhat)," and the most common <i>why it happened</i> is ").concat(n(e.mostCommonWhy),"."),a+="</p>",a+="<p>",a+="The dashboard below displays only the incidents that resulted in a release of product from the pipeline, however there are other   important incident types that may not appear on the dashboard.   Of ".concat(e.companyName," reported incidents, ").concat(n(e.seriousEvents["Adverse Environmental Effects"])," ").concat(i(e.seriousEvents["Adverse Environmental Effects"],"have")," resulted in adverse environmental effects.  There have been ").concat(n(e.seriousEvents["Serious Injury (CER or TSB)"])," serious injuries, and ").concat(n(e.seriousEvents.Fatality)," ").concat(i(e.seriousEvents.Fatality,"fatality")," related to incident events."),a+="</p>",t.innerHTML=a},u=a(9712),l=(a(7327),a(1038),a(6699),a(2772),a(6992),a(5069),a(2707),a(3710),a(8309),a(6977),a(9720),a(1539),a(8674),a(4916),a(9714),a(189),a(2023),a(8783),a(3123),a(3210),a(3948),a(1506)),c=a.n(l),p=a(2205),m=a.n(p),h=a(8585),g=a.n(h),b=a(9754),v=a.n(b),C=a(3038),S=a.n(C),y=a(319),I=a.n(y),f=a(4575),N=a.n(f),A=a(3913),P=a.n(A),H=a(9713),W=a.n(H);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=v()(e);if(t){var i=v()(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return g()(this,a)}}var w=a(8237),E=function(){function e(t){var a=t.eventType,n=t.field,i=void 0===n?void 0:n,r=t.filters,o=void 0===r?void 0:r,s=t.minRadius,d=void 0===s?void 0:s,l=t.leafletDiv,c=void 0===l?"map":l,p=t.initZoomTo,m=void 0===p?[55,-119]:p,h=t.lang,g=void 0===h?{}:h;N()(this,e),W()(this,"substanceState",{Propane:"gas","Natural Gas":"gas","Fuel Gas":"liquid","Lube Oil":"liquid","Crude Oil":"liquid","Diesel Fuel":"liquid",Gasoline:"liquid","Natural Gas Liquids":"gas",Condensate:"liquid",Other:"other","Sulphur Dioxide":"other"}),W()(this,"EVENTCOLORS",{substanceColors:{Propane:u.g.cerPalette.Forest,"Natural Gas - Sweet":u.g.cerPalette.Flame,"Natural Gas - Sour":u.g.cerPalette["Dim Grey"],"Fuel Gas":u.g.cerPalette.hcGreen,"Lube Oil":u.g.cerPalette.hcPurple,"Crude Oil - Sweet":u.g.cerPalette.Sun,"Crude Oil - Synthetic":u.g.cerPalette.Forest,"Crude Oil - Sour":u.g.cerPalette["Dim Grey"],"Natural Gas Liquids":u.g.cerPalette["Night Sky"],Condensate:u.g.cerPalette.Ocean,"Sulphur Dioxide":u.g.cerPalette.hcPurple,"Diesel Fuel":u.g.cerPalette.hcRed,Gasoline:u.g.cerPalette.Flame,Other:u.g.cerPalette.Aubergine},statusColors:{"Initially Submitted":u.g.cerPalette.Flame,Closed:u.g.cerPalette["Cool Grey"],Submitted:u.g.cerPalette.Ocean},provinceColors:{Alberta:u.g.cerPalette.Sun,"British Columbia":u.g.cerPalette.Forest,Saskatchewan:u.g.cerPalette.Aubergine,Manitoba:u.g.cerPalette.Ocean,Ontario:u.g.cerPalette["Night Sky"],Quebec:u.g.cerPalette.Flame},whyColors:{"Standards and Procedures":u.g.cerPalette.Flame,"Tools and Equipment":u.g.cerPalette.Forest,Maintenance:u.g.cerPalette["Night Sky"],"Human Factors":u.g.cerPalette.Ocean,"Engineering and Planning":u.g.cerPalette.Sun,"Natural or Environmental Forces":u.g.cerPalette.hcAqua,"To be determined":u.g.cerPalette["Cool Grey"],"Inadequate Procurement":u.g.cerPalette.Aubergine,"Inadequate Supervision":u.g.cerPalette["Dim Grey"],"Failure in communication":u.g.cerPalette.hcPink},whatColors:{"Corrosion and Cracking":u.g.cerPalette.Aubergine,"Defect and Deterioration":u.g.cerPalette["Cool Grey"],"Equipment Failure":u.g.cerPalette["Dim Grey"],"Natural Force Damage":u.g.cerPalette.Flame,"Other Causes":u.g.cerPalette.Forest,"Incorrect Operation":u.g.cerPalette["Night Sky"],"External Interference":u.g.cerPalette.Ocean,"To be determined":u.g.cerPalette.Sun}}),this.eventType=a,this.filters=o,this.minRadius=d,this.field=i,this.initZoomTo=m,this.colors=this.setColors(),this.user={latitude:void 0,longitude:void 0},this.leafletDiv=c,this.lang=g}var t,a;return P()(e,[{key:"setColors",value:function(){if("incidents"==this.eventType)return{Substance:this.EVENTCOLORS.substanceColors,Status:this.EVENTCOLORS.statusColors,Province:this.EVENTCOLORS.provinceColors,"Why It Happened":this.EVENTCOLORS.whyColors,"What Happened":this.EVENTCOLORS.whatColors}}},{key:"addBaseMap",value:function(){var e=L.map(this.leafletDiv,{zoomSnap:.5,zoomDelta:.5}).setView(this.initZoomTo,5);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}",{foo:"bar",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),e.setMinZoom(4),this.map=e}},{key:"getState",value:function(e){var t=e.split("-")[0].trim();return this.substanceState[t]}},{key:"volumeText",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=u.g.conversions["m3 to bbl"],o=u.g.conversions["m3 to cf"];if(a||n||i)if(a||!n||i)if(!a||n||i)s="other";else s="gas";else var s="liquid";else var s=this.getState(t);if("other"!==s){if("gas"==s)var d="".concat(Highcharts.numberFormat((e*o).toFixed(2),2,".")," cubic feet");else d="".concat(Highcharts.numberFormat((e*r).toFixed(2),2,".")," bbl");return"".concat(d," (").concat(Highcharts.numberFormat(e,2,".")," m3)")}return"".concat(Highcharts.numberFormat(e,2,".")," m3")}},{key:"toolTip",value:function(e,t){var a=function(e){if(e.includes(",")){for(var t=e.split(","),a="",n=0;n<t.length;n++)a+="&nbsp- "+t[n]+"<br>";return a}return"&nbsp"+e},n='<div id="incident-tooltip"><p style="font-size:15px; font-family:Arial; text-align:center"><b>'.concat(e["Incident Number"],"</b></p>");return n+="<table>",n+="<tr><td>".concat(this.field,':</td><td style="color:').concat(t,'">&nbsp<b>').concat(e[this.field],"</b></td></tr>"),n+="<tr><td>Est. Release Volume:</td><td>&nbsp<b>".concat(this.volumeText(e["Approximate Volume Released"],e.Substance),"</b></td></tr>"),n+="<tr><td>".concat(this.lang.what,"?</td><td><b>").concat(a(e["What Happened"]),"</b></td></tr>"),n+="<tr><td>".concat(this.lang.why,"?</td><td><b>").concat(a(e["Why It Happened"]),"</b></td></tr>"),n+="</table></div>"}},{key:"addCircle",value:function(e,t,a,n,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return L.circle([e,t],{color:a,fillColor:n,fillOpacity:.7,radius:this.minRadius,minRadius:i,weight:1,incidentParams:r})}},{key:"updateRadius",value:function(){if("volume"==this.filters.type)this.circles.eachLayer((function(e){try{e.setRadius(e.options.minRadius)}catch(t){e.setRadius(0),console.log("Error setting new radius")}}));else{var e=this.map.getZoom(),t=this.minRadius;e>=6.5?this.circles.eachLayer((function(e){e.setRadius(t/2)})):e<5?this.circles.eachLayer((function(e){e.setRadius(2*t)})):(e>=5||e<=5.5)&&this.circles.eachLayer((function(e){e.setRadius(t)}))}}},{key:"applyColor",value:function(e,t){try{return this.colors[t][e]}catch(e){return}}},{key:"processEventsData",value:function(e){var t=this,a=[],n=[u.g.cerPalette.Sun,"#022034","#043454","#043a5e",u.g.cerPalette["Night Sky"],"#1d5478","#366687","#507a96","#698da5","#82a0b4","#9bb3c3","#b4c6d2","#cdd9e1","#e6ecf0","#ffffff"],i=e.map((function(e){return e["Approximate Volume Released"]})),r=[Math.max.apply(Math,I()(i)),Math.min.apply(Math,I()(i))],o=r[0],s=r[1],d=o>500?15e4:1e5,l=e.map((function(e){a.push(e.Year);var n=(e["Approximate Volume Released"]-s)/(o-s);return n=n*(d-5e3)+5e3,t.addCircle(e.Latitude,e.Longitude,u.g.cerPalette["Cool Grey"],t.applyColor(e[t.field],t.field),n,e)}));a=(a=a.filter((function(e,t,a){return a.indexOf(e)===t}))).sort((function(e,t){return t-e}));var c={};a.map((function(e,t){c[e]=n[t]})),this.colors.Year=c,this.circles=L.featureGroup(l).addTo(this.map);var p=this;this.map.on("zoom",(function(e){p.updateRadius()}))}},{key:"findUser",value:(a=o()(i().mark((function e(){var t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var n=t;t.map.locate({watch:!1}).on("locationfound",(function(t){var a=L.marker([t.latitude,t.longitude],{draggable:!0}).bindPopup(n.lang.userPopUp);a.on("drag",(function(e){var t=e.target.getLatLng();n.user.latitude=t.lat,n.user.longitude=t.lng})),a.id="userLocation",n.map.addLayer(a),n.user.latitude=t.latitude,n.user.longitude=t.longitude,n.user.layer=a,e(n)})).on("locationerror",(function(e){a(n)}))})));case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"waitOnUser",value:(t=o()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.findUser();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),document.getElementById("nearby-flag").innerHTML='<section class="alert alert-warning">'.concat(this.lang.locationError,"</section>");case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return t.apply(this,arguments)})},{key:"nearbyIncidents",value:function(e){var t=[],a=[],n=this;this.circles.eachLayer((function(i){a.push(i);var r=i._latlng;w(n.user,{latitude:r.lat,longitude:r.lng})>e?i.setStyle({fillOpacity:0}):(t.push(i),i.setStyle({fillOpacity:.7}))}));var i=document.getElementById("nearby-flag"),r=L.circle([this.user.latitude,this.user.longitude],{color:void 0,fillColor:void 0,fillOpacity:0,radius:1,weight:1});if(r.addTo(this.map),t.length>0){this.nearby=L.featureGroup(t);var o=this.nearby.getBounds();o.extend(r.getBounds()),this.map.fitBounds(o,{maxZoom:15});var s=0,d=0,u=0,l=this;this.nearby.eachLayer((function(e){var t=l.getState(e.options.incidentParams.Substance);"gas"==t?s+=e.options.incidentParams["Approximate Volume Released"]:"liquid"==t?d+=e.options.incidentParams["Approximate Volume Released"]:u+=e.options.incidentParams["Approximate Volume Released"]}));var c="";c+='<section class="alert alert-info"><h4>'.concat(this.lang.nearbyHeader(t.length,e),"</h4><table>"),c+="<tr><td>\n        ".concat(this.lang.gasRelease,"&nbsp&nbsp</td><td>").concat(this.volumeText(s,void 0,!0)),c+="<tr><td>\n      ".concat(this.lang.liquidRelease,"&nbsp&nbsp</td><td>").concat(this.volumeText(d,void 0,!1,!0)),c+="<tr><td>\n      ".concat(this.lang.otherRelease,"&nbsp&nbsp</td><td>").concat(this.volumeText(u,void 0,!1,!0)),c+="</table><br><small>".concat(this.lang.exploreOther,"</small>\n        </section>"),i.innerHTML=c}else{var p=L.featureGroup(a).getBounds();p.extend(r.getBounds()),this.map.fitBounds(p,{maxZoom:15}),i.innerHTML='<section class="alert alert-warning">'.concat(this.lang.noNearby(this.eventType),"</section>")}}},{key:"reZoom",value:function(){var e=this.circles.getBounds();this.map.fitBounds(e)}},{key:"resetMap",value:function(){this.circles.eachLayer((function(e){e.setStyle({fillOpacity:.7})})),this.reZoom()}},{key:"fieldChange",value:function(e){var t=this.colors[e];this.field=e;var a=this;this.circles.eachLayer((function(n){var i=t[n.options.incidentParams[e]];n.setStyle({fillColor:i}),n.bindTooltip(a.toolTip(n.options.incidentParams,i))}))}},{key:"lookForSize",value:function(){var e=this,t=!1;$(window).on("resize",(function(){t=!0})),$(".tab > .tablinks").on("click",(function(a){t?(e.map.invalidateSize(!0),t=!1):e.map.invalidateSize(!1),e.reZoom()}))}}]),e}(),k=function(){function e(t){var a=t.plot,n=t.height,i=void 0===n?125:n,r=t.data,o=void 0!==r&&r;N()(this,e),W()(this,"greyScale",["#101010","#181818","#202020","#282828","#303030","#383838","#404040","#484848","#505050","#585858","#606060","#686868","#696969","#707070","#787878","#808080","#888888","#909090","#989898","#A0A0A0","#A8A8A8","#A9A9A9","#B0B0B0","#B8B8B8","#BEBEBE","#C0C0C0","#C8C8C8","#D0D0D0","#D3D3D3","#D8D8D8","#DCDCDC","#E0E0E0","#E8E8E8","#F0F0F0","#F5F5F5","#F8F8F8"]),this.plot=a,this.currentActive=void 0,this.barList=[],this.bars={},this.barSeries={},this.barColors=a.colors,this.allDivs=[],this.height=i,this.data=o}return P()(e,[{key:"seriesify",value:function(e,t,a,n){for(var i=function(e){return e?function(e,t,a,n,i){return{name:e,data:[{name:a,y:t[n]}],color:i[a][e],filter:n}}:function(e,t,a,n,i){return{name:e,data:[{name:a,y:t[n]}],filter:n}}}(a),r=[],o=0,s=Object.entries(t[e]);o<s.length;o++){var d=S()(s[o],2),u=d[0],l=d[1];r.push(i(u,l,e,n,a))}return r}},{key:"pillName",value:function(e){return"Status"==e?"CER ".concat(e):"".concat(e)}},{key:"createBar",value:function(e,t,a,n){return new Highcharts.chart(e,{chart:{y:-30,type:"bar",spacingRight:8,spacingLeft:2,spacingTop:8,spacingBottom:5,animation:!1},title:{text:this.pillName(t),style:{fontSize:"16px"},padding:-5,margin:0},credits:{text:""},xAxis:{visible:!1,categories:!0,gridLineWidth:0},yAxis:{maxPadding:0,visible:!0,plotLines:[{color:"white",value:0,width:1,zIndex:5}],labels:{enabled:!1},gridLineWidth:0,startOnTick:!1,endOnTick:!1,min:0,title:{text:""}},tooltip:{snap:0,useHTML:!0,formatter:function(){return"frequency"==this.series.options.filter?"".concat(this.series.name," - ").concat(this.y):"volume"==this.series.options.filter?"".concat(this.series.name," - <b>").concat(Highcharts.numberFormat(this.y,0,".")," m3</b>"):void 0}},legend:{layout:"horizontal",verticalAlign:"bottom",alignColumns:!1,margin:0,itemStyle:{color:"#000000",cursor:"default",fontSize:"13px"},itemHoverStyle:{color:"#000000",cursor:"default"},navigation:{enabled:!1}},plotOptions:{bar:{pointWidth:30},series:{animation:!1,stacking:"normal",grouping:!1,shadow:!1,states:{inactive:{opacity:1},hover:{enabled:!1}},events:{legendItemClick:function(){return!1}}}},series:this.seriesify(t,a,n,"frequency")})}},{key:"prepareData",value:function(e){var t={};this.data.map((function(a){t=function(e,t,a){return e.hasOwnProperty(t[a])?(e[t[a]].frequency+=1,e[t[a]].volume+=t["Approximate Volume Released"]):e[t[a]]={frequency:1,volume:t["Approximate Volume Released"]},e}(t,a,e)})),this.barSeries[e]=t}},{key:"deactivateChart",value:function(e){var t,a,n=e.chart,i=document.getElementById(e.div);if(n){var r=Math.floor(this.greyScale.length/n.series.length);if(n.series.length>1)var o=(t=this.greyScale,a=r,t.filter((function(e,t){return t%a==a-1}))).reverse();else o=[this.greyScale[0]];n.series.map((function(e,t){n.series[t].options.color=o[t],n.series[t].update(n.series[t].options)})),n.update({title:{text:"".concat(n.title.textStr," (click to view)")},plotOptions:{series:{borderWidth:1,borderColor:"#303030",states:{hover:{enabled:!1}}}},tooltip:{enabled:!1}})}else i.innerHTML="<p>".concat(this.pillName(e.name)," (click to view)</p>");i.style.borderStyle="solid",i.style.borderColor=u.g.cerPalette["Dim Grey"],i.style.borderRadius="5px",i.style.opacity=.4}},{key:"activateChart",value:function(e){var t=e.chart,a=document.getElementById(e.div);if(t){var n=this.barColors[e.name];t.series.map((function(e,a){t.series[a].options.color=n[e.name],t.series[a].update(t.series[a].options)}));var i=t.title.textStr;i.includes("(")&&(i=i.split("(")[0]),t.update({chart:{backgroundColor:"white"},title:{text:i},plotOptions:{series:{borderWidth:1,borderColor:"#303030",states:{hover:{enabled:!0}}}},tooltip:{enabled:!0}})}else a.innerHTML="<p>".concat(this.pillName(e.name),"</p>"),a.style.backgroundColor="white";this.currentActive=e,a.style.borderStyle="solid",a.style.borderColor=u.g.cerPalette["Cool Grey"],a.style.borderRadius="5px",a.style.opacity=1,this.plot.fieldChange(e.name)}},{key:"barEvents",value:function(e){var t=document.getElementById(e.div),a=this;t.addEventListener("mouseover",(function(){"activated"!==e.status&&(t.style.opacity=1,e.chart?e.chart.update({chart:{backgroundColor:"#F0F8FF"}}):t.style.backgroundColor="#F0F8FF")})),t.addEventListener("mouseout",(function(){"activated"!==e.status&&(t.style.opacity=.4,e.chart?e.chart.update({chart:{backgroundColor:"white"}}):t.style.backgroundColor="white")})),t.addEventListener("click",(function(){a.deactivateChart(a.currentActive),a.currentActive.status="deactivated",e.status="activated",a.activateChart(e)}))}},{key:"makeBar",value:function(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];document.getElementById(t).style.height="".concat(this.height,"px"),this.data&&this.prepareData(e);var i={chart:!!n&&this.createBar(t,e,this.barSeries,this.barColors),status:a,div:t,name:e};this.allDivs.push(t),this.barList.push(i),this.bars[e]=i,"activated"==a?this.activateChart(i):(a="deactivated")&&this.deactivateChart(i)}},{key:"divEvents",value:function(){var e=this;this.barList.map((function(t){e.barEvents(t)}))}},{key:"switchY",value:function(e){var t=this;this.barList.map((function(a){var n=t.seriesify(a.name,t.barSeries,void 0,e);a.chart.update({series:n})}))}}]),e}(),R=function(e){m()(a,e);var t=x(a);function a(e){var n,i=e.eventType,r=e.field,o=e.filters,s=e.data,d=e.hcDiv,u=e.definitions,l=void 0===u?{}:u;return N()(this,a),n=t.call(this,{eventType:i,field:r}),W()(c()(n),"ONETOMANY",{Substance:!1,Status:!1,Province:!1,"What Happened":!0,"Why It Happened":!0,category:!0}),n.filters=o,n.data=s,n.hcDiv=d,n.definitions=l,n.colors=n.setColors(),n.displayDefinitions(),n}return P()(a,[{key:"processEventsData",value:function(e,t){var a=(this.ONETOMANY[t]?function(e){var a={},n=new Set;return e.map((function(e){if(n.add(e.Year),e[t].includes(","))i=(i=e[t].split(",")).map((function(e){return e.trim()}));else var i=[e[t]];i.map((function(t){a.hasOwnProperty(t)?a[t].hasOwnProperty(e.Year)?a[t][e.Year]++:a[t][e.Year]=1:a[t]=W()({},e.Year,1)}))})),[a,Array.from(n)]}:function(e){var a={},n=new Set;return e.map((function(e){n.add(e.Year),a.hasOwnProperty(e[t])?a[e[t]].hasOwnProperty(e.Year)?a[e[t]][e.Year]++:a[e[t]][e.Year]=1:a[e[t]]=W()({},e.Year,1)})),[a,Array.from(n)]})(e),n=S()(a,2),i=n[0],r=n[1],o=[],s={};s.data=r.map((function(e){return{name:e.toString(),y:void 0}})),s.name="dummy",s.showInLegend=!1,o.push(s);for(var d=0,u=Object.entries(i);d<u.length;d++){for(var l=S()(u[d],2),c=l[0],p=l[1],m=[],h=0,g=Object.entries(p);h<g.length;h++){var b=S()(g[h],2),v=b[0],C=b[1];m.push({name:v,y:C})}o.push({name:c,data:m,color:this.applyColor(c,t)})}return o}},{key:"yAxisTitle",value:function(){return"frequency"==this.filters.type?"Number of ".concat(this.eventType):"".concat(this.eventType," volume (m3)")}},{key:"oneToManyDisclaimer",value:function(){var e=function(e){e.customLabel&&e.customLabel.destroy(),e.customLabel=void 0};if(this.ONETOMANY[this.field]){e(this.chart);var t='<section class="alert alert-warning" style="padding:4px">';t+="<p>".concat(this.eventType," can have multiple <i>").concat(this.field,"</i> values. Chart totals may appear larger due to double counting.</p>"),t+="</section>";var a=this.chart.renderer.label(t,null,null,null,null,null,!0).attr({padding:0}).css({"max-width":"700px",margin:0}).add(this.chart.rGroup);a.align(Highcharts.extend(a.getBBox(),{align:"left",x:50,verticalAlign:"top",y:-27}),null,"spacingBox"),this.chart.customLabel=a}else e(this.chart)}},{key:"displayDefinitions",value:function(){var e=document.getElementById("trend-definitions");this.definitions.hasOwnProperty(this.field)?(u.g.visibility(["trend-definitions"],"show"),e.innerHTML="<p>Click on a bar to view <i>".concat(this.field,"</i> sub definition</p>"),this.onClickDefinition=!0):(u.g.visibility(["trend-definitions"],"hide"),this.onClickDefinition=!1)}},{key:"createChart",value:function(){var e=this;this.chart=new Highcharts.chart(this.hcDiv,{chart:{type:"column",animation:!1,spacingTop:25},title:{text:""},credits:{text:""},xAxis:{categories:!0},yAxis:{title:{text:e.yAxisTitle()},stackLabels:{enabled:!0}},plotOptions:{series:{animation:!1,events:{click:function(){if(e.onClickDefinition){var t=document.getElementById("trend-definitions"),a=e.colors[e.field][this.name],n='<strong style="color:'.concat(a,'">').concat(this.name,":</strong>&nbsp");t.innerHTML=n+e.definitions[e.field][this.name]}}}}},series:this.processEventsData(this.data,this.field)})}},{key:"fieldChange",value:function(e){var t=this;if(e!==this.field){this.field=e;for(var a=this.processEventsData(this.data,e);this.chart.series.length;)this.chart.series[0].remove();a.map((function(e){t.chart.addSeries(e,!1)})),this.oneToManyDisclaimer(),this.displayDefinitions(),this.chart.redraw()}}},{key:"updateRadius",value:function(){var e=this.processEventsData(this.data,this.field);this.chart.update({series:e,yAxis:{title:{text:this.yAxisTitle()}}})}}]),a}(E);function G(e,t,a){return Y.apply(this,arguments)}function Y(){return(Y=o()(i().mark((function e(t,a,n){var r,o,s,l,c,p,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=function(){if(0==!t.length)try{d(a);var e=c(o,s,n.dashboard),i=l(t,e),r=p(o,s,n.definitions);$("#inline_content input[name='type']").click((function(){var t=$("input:radio[name=type]:checked").val();"trends"!==t&&(e.filters.type=t,r.filters.type=t,i.switchY(t),e.updateRadius())})),1==t.length&&$("#incident-volume-btn").attr("disabled","disabled"),$("#incident-view-type button").on("click",(function(){$(".btn-incident-view-type > .btn").removeClass("active"),$(this).addClass("active");var t=$(this).val(),a=["incident-map","nearby-incidents-popup"].concat(i.allDivs);"trends"!==t?(u.g.visibility(a,"show"),u.g.visibility(["time-series-section"],"hide"),$("#incident-volume-btn").removeAttr("disabled"),e.map.invalidateSize(!0)):($("#incident-volume-btn").attr("disabled","disabled"),$("#incident-count-btn").prop("checked",!0).click(),u.g.visibility(a,"hide"),u.g.visibility(["time-series-section"],"show"))})),$("#incident-range-slide").on("change",(function(){var e=$(this),t=document.getElementById("find-incidents-btn"),a=document.getElementById("find-incidents-title");t.innerText="Find Incidents within ".concat(e.val(),"km"),a.innerText="Select Range (".concat(e.val(),"km):"),t.value=e.val()})),$("#find-incidents-btn").on("click",(function(){document.getElementById("reset-incidents-btn").disabled=!1;var t=document.getElementById("find-incidents-btn").value;e.user.latitude||e.user.longitude?e.nearbyIncidents(t):e.waitOnUser().then((function(a){e.nearbyIncidents(t)}))})),$("#reset-incidents-btn").on("click",(function(){e.resetMap(),document.getElementById("reset-incidents-btn").disabled=!0,document.getElementById("nearby-flag").innerHTML=""}))}catch(e){console.log(e)}else{var m=document.getElementById("incidents-dashboard"),h='<section class="alert alert-warning"><h3>'.concat(n.noIncidents.header,"</h3>");h+="<p>".concat(n.noIncidents.note(a.companyName),"</p></section>"),m.innerHTML=h}},r="incidents",o="Substance",s={type:"frequency"},l=function(e,t){var a=new k({plot:t,pillWidth:124,data:e});return a.makeBar("Substance","substance-bar","activated",!0),a.makeBar("Status","status-bar","deactivated",!0),a.makeBar("Year","year-bar","deactivated",!0),a.makeBar("Province","province-bar","deactivated",!0),a.divEvents(),a},c=function(e,a,n){var i=new E({eventType:r,field:e,filters:a,minRadius:14e3,leafletDiv:"incident-map",lang:n});return i.addBaseMap(),i.processEventsData(t),i.lookForSize(),i},p=function(e,a,n){var i=new R({eventType:r,field:e,filters:a,data:t,hcDiv:"time-series",definitions:n}),o=new k({plot:i,height:70});return o.makeBar("Substance","substance-trend","activated",!1),o.makeBar("Status","status-trend","deactivated",!1),o.makeBar("What Happened","what-trend","deactivated",!1),o.makeBar("Why It Happened","why-trend","deactivated",!1),o.makeBar("Province","province-trend","deactivated",!1),o.divEvents(),i.createChart(),i},e.abrupt("return",m());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){return F.apply(this,arguments)}function F(){return(F=o()(i().mark((function e(t,a){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[G(s.U,s.$,a.incidents)],t(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);